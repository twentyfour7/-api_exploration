#!/usr/bin/env ruby
# frozen_string_literal: true
$LOAD_PATH.unshift File.join(File.dirname(__FILE__), '..', 'lib')
require 'kktix_api'

org_slug = ARGV[0] || ENV['KKTIX_ORGANIZATION_SLUG']
# unless org_slug
#   puts 'USAGE: kktix [org_slug]'
#   exit(1)
# end

organization = KktixEvent::Organization.find(org_slug)

unless organization.name.nil?
  puts organization.name
  puts '-' * organization.name.length
end

organization.events.first(3).each.with_index(1) do |event, index|
  print "#{index}: "
  puts "#{event.title} (#{event.author[:name]})"
  puts event.summary
  puts event.content
  puts
end
